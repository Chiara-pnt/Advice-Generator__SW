{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Chiara/Desktop/SOFTWAVE/Esercizi/Lezione 4 -Esercizi (useEffect)/lezione 4 - esercizio 2/Advice-Generator/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Chiara/Desktop/SOFTWAVE/Esercizi/Lezione 4 -Esercizi (useEffect)/lezione 4 - esercizio 2/Advice-Generator/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Chiara/Desktop/SOFTWAVE/Esercizi/Lezione 4 -Esercizi (useEffect)/lezione 4 - esercizio 2/Advice-Generator/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState,useEffect}from\"react\";import Header from\"./Header\";import ButtonDice from\"./ButtonDice\";import Patterns from\"./Patterns\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var APIURL=\"https://api.adviceslip.com/advice\";var Quote=function Quote(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),advice=_useState2[0],setAdvice=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),intervalId=_useState4[0],setIntervalId=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return fetch(APIURL);case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setAdvice(data.slip);setLoading(false);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.log(_context.t0);setLoading(false);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();setIntervalId(setInterval(function(){fetchData();},60000));},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"elements\",children:[/*#__PURE__*/_jsx(Header,{advice:advice,loading:loading}),/*#__PURE__*/_jsx(\"div\",{className:\"quote\",children:advice.advice}),/*#__PURE__*/_jsx(Patterns,{}),/*#__PURE__*/_jsx(ButtonDice,{fetchData:fetchData,intervalId:intervalId,setIntervalId:setIntervalId,loading:loading})]});};export default Quote;","map":{"version":3,"names":["React","useState","useEffect","Header","ButtonDice","Patterns","APIURL","Quote","advice","setAdvice","intervalId","setIntervalId","loading","setLoading","fetchData","fetch","response","json","data","slip","console","log","setInterval"],"sources":["C:/Users/Chiara/Desktop/SOFTWAVE/Esercizi/Lezione 4 -Esercizi (useEffect)/lezione 4 - esercizio 2/Advice-Generator/src/Components/Quote.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Header from \"./Header\";\r\nimport ButtonDice from \"./ButtonDice\";\r\nimport Patterns from \"./Patterns\";\r\n\r\nconst APIURL = \"https://api.adviceslip.com/advice\";\r\n\r\nconst Quote = () => {\r\n  const [advice, setAdvice] = useState({});\r\n  const [intervalId, setIntervalId] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch(APIURL); // no cache -> fetching before the 2s limit of api\r\n      const data = await response.json();\r\n      setAdvice(data.slip);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.log(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    setIntervalId(\r\n      setInterval(() => {\r\n        fetchData();\r\n      }, 60000)\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"elements\">\r\n      <Header advice={advice} loading={loading} />\r\n      <div className=\"quote\">{advice.advice}</div>\r\n      <Patterns />\r\n      <ButtonDice\r\n        fetchData={fetchData}\r\n        intervalId={intervalId}\r\n        setIntervalId={setIntervalId}\r\n        loading={loading}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Quote;\r\n"],"mappings":"wmBAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAOC,OAAM,KAAM,UAAU,CAC7B,MAAOC,WAAU,KAAM,cAAc,CACrC,MAAOC,SAAQ,KAAM,YAAY,CAAC,wFAElC,GAAMC,OAAM,CAAG,mCAAmC,CAElD,GAAMC,MAAK,CAAG,QAARA,MAAK,EAAS,CAClB,cAA4BN,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAAjCO,MAAM,eAAEC,SAAS,eACxB,eAAoCR,QAAQ,EAAE,yCAAvCS,UAAU,eAAEC,aAAa,eAChC,eAA8BV,QAAQ,CAAC,KAAK,CAAC,yCAAtCW,OAAO,eAAEC,UAAU,eAE1B,GAAMC,UAAS,4FAAG,uJAChBD,UAAU,CAAC,IAAI,CAAC,CAAC,sCAEQE,MAAK,CAACT,MAAM,CAAC,QAA9BU,QAAQ,qCACKA,SAAQ,CAACC,IAAI,EAAE,QAA5BC,IAAI,eACVT,SAAS,CAACS,IAAI,CAACC,IAAI,CAAC,CACpBN,UAAU,CAAC,KAAK,CAAC,CAAC,iFAElBO,OAAO,CAACC,GAAG,aAAK,CAChBR,UAAU,CAAC,KAAK,CAAC,CAAC,qEAErB,kBAXKC,UAAS,0CAWd,CAEDZ,SAAS,CAAC,UAAM,CACdY,SAAS,EAAE,CACXH,aAAa,CACXW,WAAW,CAAC,UAAM,CAChBR,SAAS,EAAE,CACb,CAAC,CAAE,KAAK,CAAC,CACV,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,aAAK,SAAS,CAAC,UAAU,wBACvB,KAAC,MAAM,EAAC,MAAM,CAAEN,MAAO,CAAC,OAAO,CAAEI,OAAQ,EAAG,cAC5C,YAAK,SAAS,CAAC,OAAO,UAAEJ,MAAM,CAACA,MAAM,EAAO,cAC5C,KAAC,QAAQ,IAAG,cACZ,KAAC,UAAU,EACT,SAAS,CAAEM,SAAU,CACrB,UAAU,CAAEJ,UAAW,CACvB,aAAa,CAAEC,aAAc,CAC7B,OAAO,CAAEC,OAAQ,EACjB,GACE,CAEV,CAAC,CAED,cAAeL,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}